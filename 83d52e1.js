(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{50:function(e,t,n){var content=n(55);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("fb388abe",content,!0,{sourceMap:!1})},54:function(e,t,n){"use strict";n(50)},55:function(e,t,n){var r=n(9)(!1);r.push([e.i,"#canvas-container[data-v-6a8a81d7]{height:100%}",""]),e.exports=r},59:function(e,t,n){"use strict";n.r(t);var r={name:"DrumKit",data(){const e=[{icon:"drum",text:"Snare Drum",imageName:"snare"},{icon:"drum",text:"Bass Drum",imageName:"bassdrum"},{icon:"drum",text:"Tom",imageName:"snare"},{icon:"record-vinyl",text:"Cymbal",imageName:"cymbal"}],t=[{name:"Pad",nb_sensors:1},{name:"Dual Zone Pad",nb_sensors:2},{name:"Hi-Hat",nb_sensors:1}];return{triggers_number:8,instruments:[],images:[],stageSize:{width:300,height:480},currentInstrument:{name:"Snare Drum",type:"Pad",sounds:[],triggers:[],imageName:"cymbal",codeName:""},selectedInstrumentMenu:e[0],instrumentsMenu:e,selectedTriggerMenu:t[0],triggersMenu:t,selectedShapeName:""}},computed:{nbTriggersLeft(){const e=this.instruments.map((i=>i.trigger));let t=0;for(let n of e){t+=this.triggersMenu.find((e=>e.name==n)).nb_sensors}return this.triggers_number-t},instrumentsNames(){return this.instruments.map((i=>i.text))}},methods:{removeInstrument(a){this.instruments=this.instruments.filter((i=>a.includes(i.text)))},addInstrument(){if(this.instrumentsNames.includes(this.currentInstrument.name))this.$buefy.dialog.alert({title:"Error",message:"An instrument with the same name already exists.",type:"is-danger",hasIcon:!0,icon:"times-circle",iconPack:"fa",ariaRole:"alertdialog",ariaModal:!0});else{const e=this.instrumentsMenu.find((i=>i.text===this.selectedInstrumentMenu.text)),t=this.images.find((i=>i.name===e.imageName)).image;this.instruments.push({image:t,text:this.currentInstrument.name,trigger:"Pad"})}},toCodeName:s=>s.replace(/\s+/g,""),handleDragStart(e){},handleDragEnd(e){console.log("target elements = ",e.target.children)},handleTransformEnd(e){const t=this.instruments.find((i=>this.toCodeName(i.text)===this.selectedShapeName));console.log("instrument = ",t)},handleStageMouseDown(e){if(e.target===e.target.getStage())return this.selectedShapeName="",void this.updateTransformer();if("Transformer"===e.target.getParent().className)return;const t=e.target.name(),rect=this.instruments.find((i=>this.toCodeName(i.text)===t));this.selectedShapeName=rect?t:"",this.updateTransformer()},updateTransformer(){const e=this.$refs.transformer.getNode(),t=e.getStage(),{selectedShapeName:n}=this,r=t.findOne("."+n);console.log(n),r!==e.node()&&(r?e.nodes([r]):e.nodes([]),e.getLayer().batchDraw())},changeRect(){const e=this.$refs.container;if(!e)return;const t=e.offsetHeight,n=e.offsetWidth;this.stageSize.width=n,this.stageSize.height=t}},mounted(){window.addEventListener("resize",this.changeRect),this.changeRect();const e=[{name:"snare",src:"/images/snare.svg"},{name:"cymbal",src:"/images/cymbal.svg"},{name:"bassdrum",src:"/images/bassdrum.svg"}];for(let t of e){const image=new Image;image.src=t.src,this.images.push({name:t.name,image:image})}this.$refs.stage.getNode().container()}},o=(n(54),n(7)),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),e._v(" "),n("div",{staticClass:"container"},[n("div",{staticClass:"columns has-text-justified"},[n("div",{staticClass:"column"},[n("section",{staticClass:"section"},[e._v("\n          Number of triggers left: "+e._s(e.nbTriggersLeft)+"\n              "),n("b-taginput",{attrs:{value:e.instrumentsNames},on:{input:e.removeInstrument}})],1)]),e._v(" "),n("div",{staticClass:"column"},[n("section",{staticClass:"section"},[n("h2",{staticClass:"subtitle"},[e._v("Add instrument")]),e._v(" "),n("b-field",{attrs:{label:"Name"}},[n("b-input",{model:{value:e.currentInstrument.name,callback:function(t){e.$set(e.currentInstrument,"name",t)},expression:"currentInstrument.name"}})],1),e._v(" "),n("section",[n("b-dropdown",{staticClass:"mb-3",attrs:{scrollable:!0,"aria-role":"list"},scopedSlots:e._u([{key:"trigger",fn:function(t){var r=t.active;return[n("b-button",{attrs:{label:e.selectedInstrumentMenu.text,type:"is-primary","icon-left":e.selectedInstrumentMenu.icon,"icon-right":r?"angle-up":"angle-down"}})]}}]),model:{value:e.selectedInstrumentMenu,callback:function(t){e.selectedInstrumentMenu=t},expression:"selectedInstrumentMenu"}},[e._v(" "),e._l(e.instrumentsMenu,(function(menu,t){return n("b-dropdown-item",{key:t,attrs:{value:menu,"aria-role":"listitem"}},[n("div",{staticClass:"media"},[n("b-icon",{staticClass:"media-left",attrs:{icon:menu.icon}}),e._v(" "),n("div",{staticClass:"media-content"},[n("h3",[e._v(e._s(menu.text))])])],1)])}))],2)],1),e._v(" "),n("section",[n("b-dropdown",{staticClass:"mb-3",attrs:{scrollable:!0,"aria-role":"list"},scopedSlots:e._u([{key:"trigger",fn:function(t){var r=t.active;return[n("b-button",{attrs:{label:e.selectedTriggerMenu.name,type:"is-primary","icon-right":r?"angle-up":"angle-down"}})]}}]),model:{value:e.selectedTriggerMenu,callback:function(t){e.selectedTriggerMenu=t},expression:"selectedTriggerMenu"}},[e._v(" "),e._l(e.triggersMenu,(function(t,r){return n("b-dropdown-item",{key:r,attrs:{"aria-role":"listitem",value:t}},[e._v(e._s(t.name))])}))],2)],1),e._v(" "),n("b-button",{attrs:{"icon-left":"plus",type:"is-primary",disabled:e.nbTriggersLeft-e.selectedTriggerMenu.nb_sensors<0},on:{click:e.addInstrument}},[e._v("\n              Add\n          ")])],1)])]),e._v(" "),n("div",{staticClass:"container",attrs:{id:"canvas-container"}},[n("div",{ref:"container",style:{height:"100%",width:"100%"}},[n("v-stage",{ref:"stage",attrs:{config:e.stageSize},on:{mousedown:e.handleStageMouseDown,touchstart:e.handleStageMouseDown}},[n("v-layer",{ref:"layer"},[e._l(e.instruments,(function(t,i){return n("v-group",{key:i,attrs:{config:{draggable:!0}},on:{dragstart:e.handleDragStart,dragend:e.handleDragEnd}},[n("v-image",{attrs:{config:{name:e.toCodeName(t.text),image:t.image,x:0,y:0,width:100,height:100}},on:{transformend:e.handleTransformEnd}}),e._v(" "),n("v-text",{ref:"text",refInFor:!0,attrs:{config:{text:t.text,x:0,y:-15,fontSize:20,fontFamily:"Calibri",fill:"black",draggable:!0}}})],1)})),e._v(" "),n("v-transformer",{ref:"transformer"})],2)],1)],1)])])])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container has-text-centered"},[n("h1",{staticClass:"title"},[e._v("Customize your kit")])])}],!1,null,"6a8a81d7",null);t.default=component.exports}}]);